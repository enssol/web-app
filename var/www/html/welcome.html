<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome</title>
    <script>
        // Sample data from records.rec
        const records = [
            {
                Project_Name: "SCJV - Pilbara Ports",
                Primary_Environmental_Mechanism: "Portside CEMP",
                Procedure: "PPA requirement",
                Environmental_Aspect: "Administration",
                Obligation_Number: "PCEMP-01",
                Obligation: "All personnel working on the PROJECT will undertake the required PPA induction via the Online Induction portal prior to commencing any work on site.",
                Accountability: "SCJV - during construction + Perdaman - during operations",
                Responsibility: "SCJV - HSSE Manager",
                ProjectPhase: "Design and Construction",
                Action_DueDate: "2107-01-01",
                Close_Out_Date: "",
                Status: "In Progress",
                Supporting_Information: "This includes: Take 5 and JHA Induction, Security Induction, Environment and Cultural Heritage Induction, Health and Safety Induction, Site Specific Induction â€“ Dampier, Emergency Control Organisation (ECO) Induction (if applicable)",
                General_Comments: "",
                Compliance_Comments: "Verify compliance through training records.",
                NonConformance_Comments: "",
                Evidence: "",
                PersonEmail: "",
                Recurring_Obligation: "Yes",
                Recurring_Frequency: "Quarterly",
                Recurring_Status: "",
                Recurring_Forcasted_Date: "2024-12-10",
                Inspection: "No",
                Inspection_Frequency: "",
                Site_or_Desktop: "Desktop",
                New_Control_Action_Required: "",
                Obligation_Type: "Training"
            },
            // Add more records as needed
        ];

        let sortDirection = {
            Project_Name: 'asc',
            Action_DueDate: 'asc'
        };

        function filterRecords() {
            const filter = document.getElementById('filterInput').value.toLowerCase();
            const dateFilter = document.getElementById('dateFilterInput').value;
            const filteredRecords = records.filter(record => {
                const matchesProjectName = record.Project_Name.toLowerCase().includes(filter);
                const matchesDate = !dateFilter || record.Action_DueDate === dateFilter;
                return matchesProjectName && matchesDate;
            });
            renderTable(filteredRecords);
        }

        function sortRecords(column) {
            const direction = sortDirection[column] === 'asc' ? 1 : -1;
            const sortedRecords = [...records].sort((a, b) => {
                if (a[column] < b[column]) return -1 * direction;
                if (a[column] > b[column]) return 1 * direction;
                return 0;
            });
            sortDirection[column] = sortDirection[column] === 'asc' ? 'desc' : 'asc';
            renderTable(sortedRecords);
        }

        function renderTable(data) {
            const tableBody = document.getElementById('recordsTableBody');
            tableBody.innerHTML = '';
            data.forEach(record => {
                const row = tableBody.insertRow();
                Object.values(record).forEach(value => {
                    const cell = row.insertCell();
                    cell.textContent = value;
                });
            });
        }

        function handleLogout() {
            window.location.href = 'login.html';
        }

        function goToProfile() {
            window.location.href = 'profile.html';
        }

        window.onload = function() {
            renderTable(records);
        };
    </script>
</head>
<body>
    <h1>Welcome</h1>
    <button onclick="handleLogout()">Logout</button>
    <button onclick="goToProfile()">Settings</button>

    <h2>Records</h2>
    <input type="text" id="filterInput" onkeyup="filterRecords()" placeholder="Filter by Project Name">
    <input type="date" id="dateFilterInput" onkeyup="filterRecords()" placeholder="Filter by Action Due Date">
    <table border="1">
        <thead>
            <tr>
                <th onclick="sortRecords('Project_Name')">Project Name</th>
                <th>Primary Environmental Mechanism</th>
                <th>Procedure</th>
                <th>Environmental Aspect</th>
                <th>Obligation Number</th>
                <th>Obligation</th>
                <th>Accountability</th>
                <th>Responsibility</th>
                <th>Project Phase</th>
                <th onclick="sortRecords('Action_DueDate')">Action Due Date</th>
                <th>Close Out Date</th>
                <th>Status</th>
                <th>Supporting Information</th>
                <th>General Comments</th>
                <th>Compliance Comments</th>
                <th>NonConformance Comments</th>
                <th>Evidence</th>
                <th>Person Email</th>
                <th>Recurring Obligation</th>
                <th>Recurring Frequency</th>
                <th>Recurring Status</th>
                <th>Recurring Forecasted Date</th>
                <th>Inspection</th>
                <th>Inspection Frequency</th>
                <th>Site or Desktop</th>
                <th>New Control Action Required</th>
                <th>Obligation Type</th>
            </tr>
        </thead>
        <tbody id="recordsTableBody">
        </tbody>
    </table>
</body>
</html>
